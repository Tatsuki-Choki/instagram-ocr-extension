# Instagram OCR - 画像文字起こし Chrome拡張機能

Instagram投稿の画像からテキストを抽出するChrome拡張機能です。Google Gemini APIを使用してOCR（光学文字認識）を行います。

## 機能

- **カルーセル対応**: 最大20枚の複数画像投稿に対応（Instagram 2024年8月アップデート対応）
- **自動枚数検出**: 投稿の画像枚数を自動で検出
- **キャプション取得**: 投稿のキャプションも別セクションで表示
- **個別コピー**: 各画像の文字起こし結果を個別にコピー可能
- **一括コピー**: 全ての文字起こし結果をまとめてコピー
- **結果保存**: 文字起こし結果はブラウザに自動保存され、タブを閉じても復元可能
- **サイドパネルUI**: 作業の邪魔にならないサイドパネル形式

## 必要なもの

- Google Chrome ブラウザ
- Google Gemini API キー（[Google AI Studio](https://aistudio.google.com/apikey)で無料取得可能）

## インストール方法

1. このフォルダ（`instagram-ocr-extension`）をダウンロード
2. Chromeで `chrome://extensions/` を開く
3. 右上の「デベロッパーモード」をオンにする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. ダウンロードした `instagram-ocr-extension` フォルダを選択

## 使い方

### 1. APIキーの設定（初回のみ）

1. [Google AI Studio](https://aistudio.google.com/apikey) でGemini APIキーを取得
2. 拡張機能アイコンをクリックしてサイドパネルを開く
3. APIキーを入力して「保存」をクリック

### 2. 文字起こしの実行

1. Instagram投稿ページを開く（例: `https://www.instagram.com/p/XXXXX/`）
2. 拡張機能アイコンをクリックしてサイドパネルを開く
3. 「文字起こし開始」ボタンをクリック
4. 処理が完了すると、各画像の文字起こし結果が表示される

### 3. テキストのコピー

- **個別コピー**: 各画像の「コピー」ボタンをクリック
- **全てコピー**: 「全てコピー」ボタンで全画像のテキストをまとめてコピー
- **キャプションコピー**: キャプションセクションの「コピー」ボタンで投稿文をコピー

## 技術仕様

- **OCRエンジン**: Google Gemini API (gemini-2.5-flash)
- **画像取得方式**: URLパラメータ方式（`img_index`）による高速・確実な取得
- **UI**: Chrome Side Panel API を使用
- **Manifest**: V3対応

## ファイル構成

```
instagram-ocr-extension/
├── manifest.json          # 拡張機能の設定ファイル
├── README.md              # このファイル
├── background/
│   └── background.js      # Service Worker（API通信）
├── content/
│   └── content.js         # コンテンツスクリプト（画像・キャプション取得）
├── sidepanel/
│   ├── sidepanel.html     # サイドパネルUI
│   ├── sidepanel.js       # サイドパネルのロジック
│   └── sidepanel.css      # スタイルシート
└── icons/
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

## 注意事項

- この拡張機能は個人利用を目的としています
- Instagram の利用規約を遵守してご使用ください
- API キーは安全に管理してください（ブラウザ内に保存され、外部には送信されません）
- 大量の画像を連続処理する場合は、API の利用制限にご注意ください

## トラブルシューティング

### 画像が取得できない場合
- ページを再読み込みしてから再度実行してください
- Instagram にログインしているか確認してください
- 投稿ページ（`/p/` で始まるURL）であることを確認してください

### API エラーが発生する場合
- API キーが正しく設定されているか確認してください
- Gemini API の利用制限に達していないか確認してください
- ネットワーク接続を確認してください

### 文字起こし結果が空の場合
- 画像にテキストが含まれていない可能性があります
- 画像の解像度が低い場合、認識精度が下がることがあります
- 手書き文字や特殊フォントは認識が困難な場合があります

## 対応環境

- Google Chrome（最新版推奨）
- Manifest V3対応

## ライセンス

MIT License

## 更新履歴

### v1.2.0
- カルーセル画像の上限を10枚から20枚に拡張（Instagram 2024年8月アップデート対応）

### v1.1.0
- 画像取得方式をURLパラメータ方式に変更（高速化・安定化）
- 画像枚数の自動検出機能を改善
- キャプションを別セクションで表示するように変更

### v1.0.0
- 初回リリース
- カルーセル画像の文字起こし対応
- キャプション取得機能
